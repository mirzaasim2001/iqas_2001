{% extends "base.html" %}
{% block content %}

<!-- HERO -->
<section class="hero">
    <div class="hero-inner">

        <!-- LEFT : TEXT -->
        <div class="hero-text">
            <h1>Intelligent Quality Affiliate System</h1>
            <p class="hero-desc">
                Discover trending products across carefully curated niches, powered by intelligent
                selection and presented through a clean, futuristic experience.
            </p>
        </div>

        <!-- RIGHT : LOGO + SLOGAN -->
        <div class="hero-visual">
            <!-- replace src with your uploaded logo path -->
            <img src="/static/logo.png" alt="IQAS Logo" class="hero-logo">

            <p class="hero-slogan">
                Designed To Choose Better
            </p>
        </div>

    </div>
</section>

<!-- SEARCH PRODUCTS SECTION -->
<section class="search-section">
    <div class="search-grid">

        <!-- SEARCH BOX -->
        <div class="search-card">
            <h2>Search Products</h2>

            <div class="search-box">
                <input
                    type="text"
                    id="productSearch"
                    placeholder="Search products..."
                >
                <div id="searchResults" class="search-results"></div>
            </div>
        </div>

        <!-- BEST PRODUCT -->
        <div class="search-card best-product-card">
            <h2>Best Product</h2>

            {% if best_product %}
            <a href="/niche/{{ best_product.niche }}/{{ best_product.id }}"
               class="best-product-inner">

                <img src="{{ best_product.image }}" alt="">
                <div>
                    <h4>{{ best_product.title }}</h4>
                    <p>{{ best_product.price }}</p>
                </div>
            </a>
            {% else %}
                <p class="muted">No featured product yet</p>
            {% endif %}
        </div>

    </div>
</section>



<!-- FEATURED SLIDER -->
{% if featured %}
<section class="section-box">
    <h2 class="section-title">Featured Picks</h2>

    <div class="slider-wrapper">
        <div class="slider-track">

            <!-- GROUP 1 -->
            <div class="slider-group">
                {% for product in featured %}
                <div class="slider-card">
                    <a href="/niche/{{ product.niche }}/{{ product.id }}">
                        <img src="{{ product.image }}" alt="">
                    </a>
                    <h4>{{ product.title }}</h4>
                    <p>{{ product.price }}</p>
                </div>
                {% endfor %}
            </div>

            <!-- GROUP 2 (CLONE for infinite loop) -->
            <div class="slider-group">
                {% for product in featured %}
                <div class="slider-card">
                    <a href="/niche/{{ product.niche }}/{{ product.id }}">
                        <img src="{{ product.image }}" alt="">
                    </a>
                    <h4>{{ product.title }}</h4>
                    <p>{{ product.price }}</p>
                </div>
                {% endfor %}
            </div>

        </div>
    </div>
</section>
{% endif %}

<!-- NICHES -->
<section class="niches-section">
    <h2 class="section-title">Browse by niche</h2>

    <div class="grid">
        {% for niche in niches %}
        <a
            href="/niche/{{ niche.name if niche is mapping else niche }}"
            class="card niche-card"
        >
            <h3>
                {{ (niche.name if niche is mapping else niche)
                    | replace('-', ' ')
                    | capitalize }}
            </h3>

            {% if niche is mapping and niche.logo %}
                <img
                    src="{{ niche.logo }}"
                    alt="{{ niche.name }}"
                    class="niche-logo"
                >
            {% endif %}
        </a>
        {% endfor %}
    </div>
</section>

{% endblock %}
